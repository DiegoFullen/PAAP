
!function(l){"use strict";l("#sidebarToggle, #sidebarToggleTop").on("click",function(e){l("body").toggleClass("sidebar-toggled"),l(".sidebar").toggleClass("toggled"),l(".sidebar").hasClass("toggled")&&l(".sidebar .collapse").collapse("hide")}),l(window).resize(function(){l(window).width()<768&&l(".sidebar .collapse").collapse("hide"),l(window).width()<480&&!l(".sidebar").hasClass("toggled")&&(l("body").addClass("sidebar-toggled"),l(".sidebar").addClass("toggled"),l(".sidebar .collapse").collapse("hide"))}),l("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(e){var o;768<l(window).width()&&(o=(o=e.originalEvent).wheelDelta||-o.detail,this.scrollTop+=30*(o<0?1:-1),e.preventDefault())}),l(document).on("scroll",function(){100<l(this).scrollTop()?l(".scroll-to-top").fadeIn():l(".scroll-to-top").fadeOut()}),l(document).on("click","a.scroll-to-top",function(e){var o=l(this);l("html, body").stop().animate({scrollTop:l(o.attr("href")).offset().top},1e3,"easeInOutExpo"),e.preventDefault()})}(jQuery);

const btnSalir = document.getElementById("btnSalir");
const dialogElem = document.querySelector("dialog");
const btnAceptar = document.getElementById("optAccept");
const btnCancelar = document.getElementById("optCancel");

btnSalir.addEventListener("click", () => {
  dialogElem.showModal();
});

btnAceptar.addEventListener("click", ()=> {
    window.location.href = 'about:blank';
    window.location.href = '/exit/';
});

document.getElementById('selectModel').addEventListener('change', function() {
  const selectedOption = this.options[this.selectedIndex];
  if (!selectedOption.value) {
      document.getElementById('displayModelName').textContent = '';
      document.getElementById('displayDatasetName').textContent = 'Dataset';
      document.getElementById('displayModelType').textContent = 'Algoritmo';
      document.getElementById('displayModelTypeTraining').textContent = 'Reg/Cla';
      return;
  }
  const modelName= selectedOption.getAttribute('data-model-name');
  const datasetName = selectedOption.getAttribute('data-dataset-name');
  const modelType = selectedOption.getAttribute('data-model-type');
  const modelTypeTraining = selectedOption.getAttribute('data-model-training');
  document.getElementById('displayModelName').textContent = modelName;
  document.getElementById('displayDatasetName').textContent = datasetName;
  document.getElementById('displayModelType').textContent = modelType;
  document.getElementById('displayModelTypeTraining').textContent = modelTypeTraining;
  const modelId = selectedOption.value;
  console.log("Modelo seleccionado ID:", modelId);
});

document.getElementById('btnErase').addEventListener('click', function() {
  const selectedOption = document.getElementById('selectModel').selectedOptions[0];
  if (!selectedOption || !selectedOption.value) {
    alert('Por favor selecciona un modelo primero');
    return;
  }

  const modelId = selectedOption.getAttribute('data-model-id');
  const datasetId = selectedOption.getAttribute('data-dataset-id');
  const eraseDialog = document.querySelector('.alertDialog');
  eraseDialog.showModal();
  const eraseAccept = document.getElementById('eraseAccept');
  const eraseDeny = document.getElementById('eraseDeny');
  
  eraseAccept.onclick = null;
  eraseDeny.onclick = null;

  eraseAccept.addEventListener('click', function() {
    const deleteUrl = `/gestion_usuarios/delete_model/${modelId}/${datasetId}/`;
    window.location.href = deleteUrl;
    eraseDialog.close();
  });

  eraseDeny.addEventListener('click', function() {
    eraseDialog.close();
  });
});